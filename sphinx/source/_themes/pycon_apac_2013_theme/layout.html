{% macro get_pagename_without_lang() -%}
    {#
        get_pagename_without_lang()  #'index.html' では 'index' を返します
        get_pagename_without_lang()  #'ja/index.html' では 'index' を返します
        get_pagename_without_lang()  #'ja/foo/index.html' では 'foo/index' を返します
    #}
    {%- set nameslist = pagename.split('/') %}
    {%- if nameslist[0] == 'ja' %}{{'/'.join(nameslist[1:])}}
    {%- else %}{{'/'.join(nameslist)}}
    {%- endif %}
{%- endmacro %}
{% set pagename2 = get_pagename_without_lang() %}
{% macro _getName(str) -%}
    {#
        _getName("")　        自分名前を返します
        _getName("my")        自分名前を返します
        _getName("pwd")       自分のいるディレクトリ名を返します
        _getName("section")   自分のいるページセクション名を返します
        _getName("lang")      自分のいる言語を返します
    #}
    {%- set nameslist = pagename.split('/') %}
    {%- if str == "my" %}{{ '-'.join(nameslist) }}
    {%- elif str == "pwd" and nameslist.count > 2 %}{{ nameslist[-2] }}
    {%- elif str == "section" %}section-{{ '-'.join(nameslist) }}
    {%- elif str == "lang" %}{%- if nameslist[0] == "ja" %}lang-ja{% elif nameslist[0] == "zh" %}lang-zh{% else %}lang-en{% endif %}
    {%- else %}{{ nameslist[-1] }}
    {%- endif %}
{%- endmacro %}
{%- block doctype %}
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3c.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
{%- endblock doctype %}

<html xmlns="http://www.w3.org/1999/xhtml">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <title>{{ title }}</title>
  <link rel="shortcut icon" href="{{ pathto('_static/favicon.png', 1) }}" />
  <link rel="stylesheet" href="{{ pathto('_static/normalize.css', 1) }}" type="text/css" />
  <link rel="stylesheet" href="{{ pathto('_static/' + style, 1) }}" type="text/css" media="all" />
</head>

<body>

{%- block header %}
  <div id="header">

    <div id="pycon_logo">
      {%- if _getName('lang') == 'lang-ja' %}
        <a href="{{ pathto('ja/index') }}">PycCon APAC 2013 in Japan</a>
      {%- elif _getName('lang') == 'lang-zh' %}
        <a href="{{ pathto('zh/index') }}">PycCon APAC 2013 in Japan</a>
      {%- else %}
        <a href="{{ pathto('index') }}">PycCon APAC 2013 in Japan</a>
      {%- endif %}
    </div>

    <div id="date_venue">
      {%- if _getName('lang') == 'lang-ja' %}
        9月13日〜16日<br />
        工学院大学<br />
        新宿キャンパス
      {%- elif _getName('lang') == 'lang-zh' %}
        9月13日〜16日<br />
        工學院大學<br />
        新宿校區
      {%- else %}
        September 13-16<br />
        Kougakuin University<br />
        Shinjuku campus
      {%- endif %}
    </div>

    <div id="global_nav">
      {%- if _getName('lang') == 'lang-ja' %}
        <ul>
          <li><a href="{{ pathto('ja/about/index') }}" class="program">About</a></li>
          <li class="highlight"><a href="{{ pathto('ja/speakers/cfp') }}" class="program">CfP</a></li>
          <li><a href="{{ pathto('ja/speakers/keynote') }}" class="program">Speakers</a></li>
          <li><a href="{{ pathto('ja/venue/index') }}" class="program">Venue</a></li>
          <li><a href="{{ pathto('ja/sponsors/prospectus') }}" class="program">Sponsors</a></li>
        </ul>
      {%- elif _getName('lang') == 'lang-zh' %}
        <ul>
          <li><a href="{{ pathto('zh/about/index') }}" class="program">About</a></li>
          <li class="highlight"><a href="{{ pathto('zh/speakers/cfp') }}" class="program">CfP</a></li>
          <li><a href="{{ pathto('zh/speakers/keynote') }}" class="program">Speakers</a></li>
          <li><a href="{{ pathto('zh/venue/index') }}" class="program">Venue</a></li>
          <li><a href="{{ pathto('zh/sponsors/prospectus') }}" class="program">Sponsors</a></li>
        </ul>
      {%- else %}
        <ul>
          <li><a href="{{ pathto('about/index') }}" class="program">About</a></li>
          <li class="highlight"><a href="{{ pathto('speakers/cfp') }}" class="program">CfP</a></li>
          <li><a href="{{ pathto('speakers/keynote') }}" class="program">Speakers</a></li>
          <li><a href="{{ pathto('venue/index') }}" class="program">Venue</a></li>
          <li><a href="{{ pathto('sponsors/prospectus') }}" class="program">Sponsors</a></li>
        </ul>
      {%- endif %}
    </div>
    <div id="lang">
      {%- if _getName('lang') == 'lang-en' %}
        English
      {%- else %}
        {%- if _getName('pwd') != '' and _getName('') == 'index' %}
          <a href="{{ pathto('index') }}">English</a>
        {%- else %}
          <a href="{{ pathto(_getName("pwd")+'/'+_getName("")) }}">English</a>
        {%- endif %}
      {%- endif %}
        |
      {%- if _getName('lang') == 'lang-ja' %}
        日本語
      {%- else %}
        {%- if _getName('pwd') != 'ja' and _getName('') == 'index' %}
          <a href="{{ pathto('ja/index') }}">日本語</a>
        {%- else %}
          <a href="{{ pathto('ja/'+_getName("pwd")+'/'+_getName("")) }}">日本語</a>
        {%- endif %}
      {%- endif %}
        |
      {%- if _getName('lang') == 'lang-zh' %}
        中文
      {%- else %}
        {%- if _getName('pwd') != 'zh' and _getName('') == 'index' %}
          <a href="{{ pathto('zh/index') }}">中文</a>
        {%- else %}
          <a href="{{ pathto('zh/'+_getName("pwd")+'/'+_getName("")) }}">中文</a>
        {%- endif %}
      {%- endif %}
      <!-- {{ _getName("pwd") }} {{ _getName('') }} -->

    </div>

  </div>
{%- endblock header %}

  <div id="contents">
{%- block body %}
      {{ body }}
{%- endblock body %}
  </div>

{%- block sidebar %}
  <div id="sidebar">
    {%- if _getName('lang') == 'lang-ja' %}
      <h3>PyCon APAC 2013<br />
        スポンサー募集中</h3>
      <a href="{{ pathto('ja/sponsors/prospectus') }}" class="program">詳細はこちら&gt;&gt;</a>
    {%- elif _getName('lang') == 'lang-zh' %}
      <h3>PyCon APAC 2013<br />
        徵求贊助</h3>
      <a href="{{ pathto('zh/sponsors/prospectus') }}" class="program">詳情見此&gt;&gt;</a>
    {%- else %}
      <h3>PyCon APAC 2013<br />
        Sponsorship available</h3>
      <a href="{{ pathto('sponsors/prospectus') }}" class="program">Learn more&gt;&gt;</a>
    {%- endif %}

    {%- if _getName('lang') == 'lang-ja' %}
      <h4>メディアスポンサー</h4>
    {%- elif _getName('lang') == 'lang-zh' %}
      <h4>媒體贊助</h4>
    {%- else %}
      <h4>Media sponsors</h4>
    {%- endif %}
    <div class="banners">
      <div class="banner">
        <a href="http://gihyo.jp/" target="_blank">
          <img src="{{ pathto('_static/image/logo_gihyo.png', 1) }}" />
        </a>
      </div>
      <hr />
      <div class="banner">
        <a href="http://codezine.jp/" target="_blank">
          <img src="{{ pathto('_static/image/logo_codezine.png', 1) }}" />
        </a>
      </div>
      <hr />
      <div class="banner">
        <a href="http://www.oreilly.co.jp/" target="_blank">
          <img src="{{ pathto('_static/image/logo_oreilly.png', 1) }}" />
        </a>
      </div>
    </div>
  </div>
{%- endblock sidebar %}

{%- block footer %}
  <div id="footer">
    &copy;Copyright 2013, PyCon Organizers JP, All right reserved. | Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2b1.
  </div>
{%- endblock footer %}

</body>

</html>
